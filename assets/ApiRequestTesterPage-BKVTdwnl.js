import{e as we,j as e,R as Gt,Q as Kt,V as Ut,W as ne,X as zt,Y as Ht,Z as Bt,_ as Jt,$ as qt,z as R,a0 as We,r as a,a1 as Xt,a2 as Ze,a3 as Qe,a4 as et,a5 as Yt,a6 as Wt,a7 as Zt,a8 as be,a9 as Qt,aa as de,ab as M,ac as es,ad as ts,ae as re,af as ss,ag as ns,ah as rs,ai as as,aj as os,ak as cs,al as ls,am as is,an as ds,ao as tt,ap as us,aq as Be,B as N,U as ms,G as L,T as _e,K as k,ar as Re,as as hs,at as xs,D as st,P as he,au as De,A as Te,av as ps,S as fs,g as vs,h as js,i as gs,k as ys,q as xe,s as pe,v as H,w as B,O as Ns,o as ws,m as bs,L as Je,H as Cs,aw as Ms,ax as Es,ay as Ss}from"./index-DKgF71w0.js";import{A as Oe}from"./index-CWT3di6J.js";import{T as W}from"./trash-2-BtuitG_V.js";import{S as _s}from"./search-B7Jjxz8j.js";import{C as Rs}from"./circle-check-big-C4a9-WjG.js";/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],nt=we("Ellipsis",Ds);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],Is=we("File",Ps);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],X=we("Plus",Ts);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],rt=we("SquarePen",Os);function fe({...t}){return e.jsx(Gt,{"data-slot":"dialog",...t})}function Pe({...t}){return e.jsx(Kt,{"data-slot":"dialog-trigger",...t})}function ks({...t}){return e.jsx(Jt,{"data-slot":"dialog-portal",...t})}function As({className:t,...s}){return e.jsx(qt,{"data-slot":"dialog-overlay",className:ne("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function ve({className:t,children:s,...n}){return e.jsxs(ks,{"data-slot":"dialog-portal",children:[e.jsx(As,{}),e.jsxs(Ut,{"data-slot":"dialog-content",className:ne("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...n,children:[s,e.jsxs(zt,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[e.jsx(Ht,{}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function je({className:t,...s}){return e.jsx("div",{"data-slot":"dialog-header",className:ne("flex flex-col gap-2 text-center sm:text-left",t),...s})}function ge({className:t,...s}){return e.jsx(Bt,{"data-slot":"dialog-title",className:ne("text-lg leading-none font-semibold",t),...s})}const z=`${Oe}/request-tester/collections`,se=`${Oe}/request-tester/environments`,Fs={getAll:()=>R.get(z),getById:t=>R.get(`${z}/${t}`),create:t=>R.post(z,t),update:(t,s)=>R.put(`${z}/${t}`,s),delete:t=>R.delete(`${z}/${t}`),addRequest:(t,s)=>R.post(`${z}/${t}/requests`,s),updateRequest:(t,s,n)=>R.put(`${z}/${t}/requests/${s}`,n),deleteRequest:(t,s)=>R.delete(`${z}/${t}/requests/${s}`),import:t=>R.post(`${z}/import`,t),export:t=>R.get(`${z}/${t}/export`)},qe={getAll:()=>R.get(se),getActive:()=>R.get(`${se}/active`),create:t=>R.post(se,t),update:(t,s)=>R.put(`${se}/${t}`,s),delete:t=>R.delete(`${se}/${t}`),activate:t=>R.post(`${se}/${t}/activate`)};function $s(t,s={}){return t.replace(/\{\{(.*?)\}\}/g,(n,r)=>s[r.trim()]??"")}const A=R.create({baseURL:`${Oe}/request-tester`,headers:{"Content-Type":"application/json"}}),Ls=async t=>{try{return(await A.post("/execute",t)).data.data}catch(s){throw R.isAxiosError(s)&&s.response?new Error(s.response.data.error||"Failed to execute request"):new Error("Network error. Please check your connection.")}},Xe=async(t=20,s=0)=>{try{return(await A.get(`/history?limit=${t}&offset=${s}`)).data.data.items}catch(n){return console.error("Failed to fetch history:",n),[]}},Vs=async()=>{try{await A.delete("/history")}catch(t){throw console.error("Failed to clear history:",t),t}},Gs=async()=>{try{return(await A.get("/collections")).data.data}catch(t){return console.error("Failed to fetch collections:",t),[]}},Ks=async(t,s)=>{try{return(await A.post("/collections",{name:t,description:s})).data.data}catch(n){throw console.error("Failed to create collection:",n),n}},Us=async t=>{try{await A.delete(`/collections/${t}`)}catch(s){throw console.error("Failed to delete collection:",s),s}},zs=async t=>{try{return(await A.get(`/collections/${t}/export`)).data.data}catch(s){throw console.error("Failed to export collection:",s),s}},Hs=async()=>{try{return(await A.get("/environments")).data.data}catch(t){return console.error("Failed to fetch environments:",t),[]}},Bs=async()=>{var t;try{return(await A.get("/environments/active")).data.data}catch(s){return R.isAxiosError(s)&&((t=s.response)==null?void 0:t.status)===404||console.error("Failed to fetch active environment:",s),null}},Js=async(t,s={})=>{try{return(await A.post("/environments",{name:t,variables:s})).data.data}catch(n){throw console.error("Failed to create environment:",n),n}},qs=async(t,s)=>{try{return(await A.put(`/environments/${t}`,s)).data.data}catch(n){throw console.error("Failed to update environment:",n),n}},Xs=async t=>{try{await A.delete(`/environments/${t}`)}catch(s){throw console.error("Failed to delete environment:",s),s}},Ys=async t=>{try{return(await A.post(`/environments/${t}/activate`)).data.data}catch(s){throw console.error("Failed to set active environment:",s),s}};var Ie=["Enter"," "],Ws=["ArrowDown","PageUp","Home"],at=["ArrowUp","PageDown","End"],Zs=[...Ws,...at],Qs={ltr:[...Ie,"ArrowRight"],rtl:[...Ie,"ArrowLeft"]},en={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ue="Menu",[le,tn,sn]=Xt(ue),[Z,ot]=We(ue,[sn,Ze,Qe]),Ce=Ze(),ct=Qe(),[nn,Q]=Z(ue),[rn,me]=Z(ue),lt=t=>{const{__scopeMenu:s,open:n=!1,children:r,dir:o,onOpenChange:c,modal:h=!0}=t,x=Ce(s),[v,l]=a.useState(null),p=a.useRef(!1),u=et(c),d=Yt(o);return a.useEffect(()=>{const g=()=>{p.current=!0,document.addEventListener("pointerdown",j,{capture:!0,once:!0}),document.addEventListener("pointermove",j,{capture:!0,once:!0})},j=()=>p.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",j,{capture:!0}),document.removeEventListener("pointermove",j,{capture:!0})}},[]),e.jsx(Wt,{...x,children:e.jsx(nn,{scope:s,open:n,onOpenChange:u,content:v,onContentChange:l,children:e.jsx(rn,{scope:s,onClose:a.useCallback(()=>u(!1),[u]),isUsingKeyboardRef:p,dir:d,modal:h,children:r})})})};lt.displayName=ue;var an="MenuAnchor",ke=a.forwardRef((t,s)=>{const{__scopeMenu:n,...r}=t,o=Ce(n);return e.jsx(Zt,{...o,...r,ref:s})});ke.displayName=an;var Ae="MenuPortal",[on,it]=Z(Ae,{forceMount:void 0}),dt=t=>{const{__scopeMenu:s,forceMount:n,children:r,container:o}=t,c=Q(Ae,s);return e.jsx(on,{scope:s,forceMount:n,children:e.jsx(be,{present:n||c.open,children:e.jsx(Qt,{asChild:!0,container:o,children:r})})})};dt.displayName=Ae;var V="MenuContent",[cn,Fe]=Z(V),ut=a.forwardRef((t,s)=>{const n=it(V,t.__scopeMenu),{forceMount:r=n.forceMount,...o}=t,c=Q(V,t.__scopeMenu),h=me(V,t.__scopeMenu);return e.jsx(le.Provider,{scope:t.__scopeMenu,children:e.jsx(be,{present:r||c.open,children:e.jsx(le.Slot,{scope:t.__scopeMenu,children:h.modal?e.jsx(ln,{...o,ref:s}):e.jsx(dn,{...o,ref:s})})})})}),ln=a.forwardRef((t,s)=>{const n=Q(V,t.__scopeMenu),r=a.useRef(null),o=de(s,r);return a.useEffect(()=>{const c=r.current;if(c)return es(c)},[]),e.jsx($e,{...t,ref:o,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:M(t.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),dn=a.forwardRef((t,s)=>{const n=Q(V,t.__scopeMenu);return e.jsx($e,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),$e=a.forwardRef((t,s)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:o,onOpenAutoFocus:c,onCloseAutoFocus:h,disableOutsidePointerEvents:x,onEntryFocus:v,onEscapeKeyDown:l,onPointerDownOutside:p,onFocusOutside:u,onInteractOutside:d,onDismiss:g,disableOutsideScroll:j,...C}=t,D=Q(V,n),S=me(V,n),P=Ce(n),_=ct(n),O=tn(n),[G,K]=a.useState(null),b=a.useRef(null),F=de(s,b,D.onContentChange),f=a.useRef(0),i=a.useRef(""),w=a.useRef(0),I=a.useRef(null),m=a.useRef("right"),E=a.useRef(0),Y=j?rs:a.Fragment,Lt=j?{as,allowPinchZoom:!0}:void 0,Vt=y=>{var te,ze;const $=i.current+y,U=O().filter(J=>!J.disabled),q=document.activeElement,Ee=(te=U.find(J=>J.ref.current===q))==null?void 0:te.textValue,Se=U.map(J=>J.textValue),Ue=wn(Se,$,Ee),ae=(ze=U.find(J=>J.textValue===Ue))==null?void 0:ze.ref.current;(function J(He){i.current=He,window.clearTimeout(f.current),He!==""&&(f.current=window.setTimeout(()=>J(""),1e3))})($),ae&&setTimeout(()=>ae.focus())};a.useEffect(()=>()=>window.clearTimeout(f.current),[]),ns();const ee=a.useCallback(y=>{var U,q;return m.current===((U=I.current)==null?void 0:U.side)&&Cn(y,(q=I.current)==null?void 0:q.area)},[]);return e.jsx(cn,{scope:n,searchRef:i,onItemEnter:a.useCallback(y=>{ee(y)&&y.preventDefault()},[ee]),onItemLeave:a.useCallback(y=>{var $;ee(y)||(($=b.current)==null||$.focus(),K(null))},[ee]),onTriggerLeave:a.useCallback(y=>{ee(y)&&y.preventDefault()},[ee]),pointerGraceTimerRef:w,onPointerGraceIntentChange:a.useCallback(y=>{I.current=y},[]),children:e.jsx(Y,{...Lt,children:e.jsx(os,{asChild:!0,trapped:o,onMountAutoFocus:M(c,y=>{var $;y.preventDefault(),($=b.current)==null||$.focus({preventScroll:!0})}),onUnmountAutoFocus:h,children:e.jsx(cs,{asChild:!0,disableOutsidePointerEvents:x,onEscapeKeyDown:l,onPointerDownOutside:p,onFocusOutside:u,onInteractOutside:d,onDismiss:g,children:e.jsx(ls,{asChild:!0,..._,dir:S.dir,orientation:"vertical",loop:r,currentTabStopId:G,onCurrentTabStopIdChange:K,onEntryFocus:M(v,y=>{S.isUsingKeyboardRef.current||y.preventDefault()}),preventScrollOnEntryFocus:!0,children:e.jsx(is,{role:"menu","aria-orientation":"vertical","data-state":St(D.open),"data-radix-menu-content":"",dir:S.dir,...P,...C,ref:F,style:{outline:"none",...C.style},onKeyDown:M(C.onKeyDown,y=>{const U=y.target.closest("[data-radix-menu-content]")===y.currentTarget,q=y.ctrlKey||y.altKey||y.metaKey,Ee=y.key.length===1;U&&(y.key==="Tab"&&y.preventDefault(),!q&&Ee&&Vt(y.key));const Se=b.current;if(y.target!==Se||!Zs.includes(y.key))return;y.preventDefault();const ae=O().filter(te=>!te.disabled).map(te=>te.ref.current);at.includes(y.key)&&ae.reverse(),yn(ae)}),onBlur:M(t.onBlur,y=>{y.currentTarget.contains(y.target)||(window.clearTimeout(f.current),i.current="")}),onPointerMove:M(t.onPointerMove,ie(y=>{const $=y.target,U=E.current!==y.clientX;if(y.currentTarget.contains($)&&U){const q=y.clientX>E.current?"right":"left";m.current=q,E.current=y.clientX}}))})})})})})})});ut.displayName=V;var un="MenuGroup",Le=a.forwardRef((t,s)=>{const{__scopeMenu:n,...r}=t;return e.jsx(re.div,{role:"group",...r,ref:s})});Le.displayName=un;var mn="MenuLabel",mt=a.forwardRef((t,s)=>{const{__scopeMenu:n,...r}=t;return e.jsx(re.div,{...r,ref:s})});mt.displayName=mn;var ye="MenuItem",Ye="menu.itemSelect",Me=a.forwardRef((t,s)=>{const{disabled:n=!1,onSelect:r,...o}=t,c=a.useRef(null),h=me(ye,t.__scopeMenu),x=Fe(ye,t.__scopeMenu),v=de(s,c),l=a.useRef(!1),p=()=>{const u=c.current;if(!n&&u){const d=new CustomEvent(Ye,{bubbles:!0,cancelable:!0});u.addEventListener(Ye,g=>r==null?void 0:r(g),{once:!0}),ss(u,d),d.defaultPrevented?l.current=!1:h.onClose()}};return e.jsx(ht,{...o,ref:v,disabled:n,onClick:M(t.onClick,p),onPointerDown:u=>{var d;(d=t.onPointerDown)==null||d.call(t,u),l.current=!0},onPointerUp:M(t.onPointerUp,u=>{var d;l.current||(d=u.currentTarget)==null||d.click()}),onKeyDown:M(t.onKeyDown,u=>{const d=x.searchRef.current!=="";n||d&&u.key===" "||Ie.includes(u.key)&&(u.currentTarget.click(),u.preventDefault())})})});Me.displayName=ye;var ht=a.forwardRef((t,s)=>{const{__scopeMenu:n,disabled:r=!1,textValue:o,...c}=t,h=Fe(ye,n),x=ct(n),v=a.useRef(null),l=de(s,v),[p,u]=a.useState(!1),[d,g]=a.useState("");return a.useEffect(()=>{const j=v.current;j&&g((j.textContent??"").trim())},[c.children]),e.jsx(le.ItemSlot,{scope:n,disabled:r,textValue:o??d,children:e.jsx(ts,{asChild:!0,...x,focusable:!r,children:e.jsx(re.div,{role:"menuitem","data-highlighted":p?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...c,ref:l,onPointerMove:M(t.onPointerMove,ie(j=>{r?h.onItemLeave(j):(h.onItemEnter(j),j.defaultPrevented||j.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:M(t.onPointerLeave,ie(j=>h.onItemLeave(j))),onFocus:M(t.onFocus,()=>u(!0)),onBlur:M(t.onBlur,()=>u(!1))})})})}),hn="MenuCheckboxItem",xt=a.forwardRef((t,s)=>{const{checked:n=!1,onCheckedChange:r,...o}=t;return e.jsx(gt,{scope:t.__scopeMenu,checked:n,children:e.jsx(Me,{role:"menuitemcheckbox","aria-checked":Ne(n)?"mixed":n,...o,ref:s,"data-state":Ge(n),onSelect:M(o.onSelect,()=>r==null?void 0:r(Ne(n)?!0:!n),{checkForDefaultPrevented:!1})})})});xt.displayName=hn;var pt="MenuRadioGroup",[xn,pn]=Z(pt,{value:void 0,onValueChange:()=>{}}),ft=a.forwardRef((t,s)=>{const{value:n,onValueChange:r,...o}=t,c=et(r);return e.jsx(xn,{scope:t.__scopeMenu,value:n,onValueChange:c,children:e.jsx(Le,{...o,ref:s})})});ft.displayName=pt;var vt="MenuRadioItem",jt=a.forwardRef((t,s)=>{const{value:n,...r}=t,o=pn(vt,t.__scopeMenu),c=n===o.value;return e.jsx(gt,{scope:t.__scopeMenu,checked:c,children:e.jsx(Me,{role:"menuitemradio","aria-checked":c,...r,ref:s,"data-state":Ge(c),onSelect:M(r.onSelect,()=>{var h;return(h=o.onValueChange)==null?void 0:h.call(o,n)},{checkForDefaultPrevented:!1})})})});jt.displayName=vt;var Ve="MenuItemIndicator",[gt,fn]=Z(Ve,{checked:!1}),yt=a.forwardRef((t,s)=>{const{__scopeMenu:n,forceMount:r,...o}=t,c=fn(Ve,n);return e.jsx(be,{present:r||Ne(c.checked)||c.checked===!0,children:e.jsx(re.span,{...o,ref:s,"data-state":Ge(c.checked)})})});yt.displayName=Ve;var vn="MenuSeparator",Nt=a.forwardRef((t,s)=>{const{__scopeMenu:n,...r}=t;return e.jsx(re.div,{role:"separator","aria-orientation":"horizontal",...r,ref:s})});Nt.displayName=vn;var jn="MenuArrow",wt=a.forwardRef((t,s)=>{const{__scopeMenu:n,...r}=t,o=Ce(n);return e.jsx(ds,{...o,...r,ref:s})});wt.displayName=jn;var gn="MenuSub",[Er,bt]=Z(gn),oe="MenuSubTrigger",Ct=a.forwardRef((t,s)=>{const n=Q(oe,t.__scopeMenu),r=me(oe,t.__scopeMenu),o=bt(oe,t.__scopeMenu),c=Fe(oe,t.__scopeMenu),h=a.useRef(null),{pointerGraceTimerRef:x,onPointerGraceIntentChange:v}=c,l={__scopeMenu:t.__scopeMenu},p=a.useCallback(()=>{h.current&&window.clearTimeout(h.current),h.current=null},[]);return a.useEffect(()=>p,[p]),a.useEffect(()=>{const u=x.current;return()=>{window.clearTimeout(u),v(null)}},[x,v]),e.jsx(ke,{asChild:!0,...l,children:e.jsx(ht,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":o.contentId,"data-state":St(n.open),...t,ref:tt(s,o.onTriggerChange),onClick:u=>{var d;(d=t.onClick)==null||d.call(t,u),!(t.disabled||u.defaultPrevented)&&(u.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:M(t.onPointerMove,ie(u=>{c.onItemEnter(u),!u.defaultPrevented&&!t.disabled&&!n.open&&!h.current&&(c.onPointerGraceIntentChange(null),h.current=window.setTimeout(()=>{n.onOpenChange(!0),p()},100))})),onPointerLeave:M(t.onPointerLeave,ie(u=>{var g,j;p();const d=(g=n.content)==null?void 0:g.getBoundingClientRect();if(d){const C=(j=n.content)==null?void 0:j.dataset.side,D=C==="right",S=D?-5:5,P=d[D?"left":"right"],_=d[D?"right":"left"];c.onPointerGraceIntentChange({area:[{x:u.clientX+S,y:u.clientY},{x:P,y:d.top},{x:_,y:d.top},{x:_,y:d.bottom},{x:P,y:d.bottom}],side:C}),window.clearTimeout(x.current),x.current=window.setTimeout(()=>c.onPointerGraceIntentChange(null),300)}else{if(c.onTriggerLeave(u),u.defaultPrevented)return;c.onPointerGraceIntentChange(null)}})),onKeyDown:M(t.onKeyDown,u=>{var g;const d=c.searchRef.current!=="";t.disabled||d&&u.key===" "||Qs[r.dir].includes(u.key)&&(n.onOpenChange(!0),(g=n.content)==null||g.focus(),u.preventDefault())})})})});Ct.displayName=oe;var Mt="MenuSubContent",Et=a.forwardRef((t,s)=>{const n=it(V,t.__scopeMenu),{forceMount:r=n.forceMount,...o}=t,c=Q(V,t.__scopeMenu),h=me(V,t.__scopeMenu),x=bt(Mt,t.__scopeMenu),v=a.useRef(null),l=de(s,v);return e.jsx(le.Provider,{scope:t.__scopeMenu,children:e.jsx(be,{present:r||c.open,children:e.jsx(le.Slot,{scope:t.__scopeMenu,children:e.jsx($e,{id:x.contentId,"aria-labelledby":x.triggerId,...o,ref:l,align:"start",side:h.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:p=>{var u;h.isUsingKeyboardRef.current&&((u=v.current)==null||u.focus()),p.preventDefault()},onCloseAutoFocus:p=>p.preventDefault(),onFocusOutside:M(t.onFocusOutside,p=>{p.target!==x.trigger&&c.onOpenChange(!1)}),onEscapeKeyDown:M(t.onEscapeKeyDown,p=>{h.onClose(),p.preventDefault()}),onKeyDown:M(t.onKeyDown,p=>{var g;const u=p.currentTarget.contains(p.target),d=en[h.dir].includes(p.key);u&&d&&(c.onOpenChange(!1),(g=x.trigger)==null||g.focus(),p.preventDefault())})})})})})});Et.displayName=Mt;function St(t){return t?"open":"closed"}function Ne(t){return t==="indeterminate"}function Ge(t){return Ne(t)?"indeterminate":t?"checked":"unchecked"}function yn(t){const s=document.activeElement;for(const n of t)if(n===s||(n.focus(),document.activeElement!==s))return}function Nn(t,s){return t.map((n,r)=>t[(s+r)%t.length])}function wn(t,s,n){const o=s.length>1&&Array.from(s).every(l=>l===s[0])?s[0]:s,c=n?t.indexOf(n):-1;let h=Nn(t,Math.max(c,0));o.length===1&&(h=h.filter(l=>l!==n));const v=h.find(l=>l.toLowerCase().startsWith(o.toLowerCase()));return v!==n?v:void 0}function bn(t,s){const{x:n,y:r}=t;let o=!1;for(let c=0,h=s.length-1;c<s.length;h=c++){const x=s[c].x,v=s[c].y,l=s[h].x,p=s[h].y;v>r!=p>r&&n<(l-x)*(r-v)/(p-v)+x&&(o=!o)}return o}function Cn(t,s){if(!s)return!1;const n={x:t.clientX,y:t.clientY};return bn(n,s)}function ie(t){return s=>s.pointerType==="mouse"?t(s):void 0}var Mn=lt,En=ke,Sn=dt,_n=ut,Rn=Le,Dn=mt,Pn=Me,In=xt,Tn=ft,On=jt,kn=yt,An=Nt,Fn=wt,$n=Ct,Ln=Et,Ke="DropdownMenu",[Vn,Sr]=We(Ke,[ot]),T=ot(),[Gn,_t]=Vn(Ke),Rt=t=>{const{__scopeDropdownMenu:s,children:n,dir:r,open:o,defaultOpen:c,onOpenChange:h,modal:x=!0}=t,v=T(s),l=a.useRef(null),[p=!1,u]=us({prop:o,defaultProp:c,onChange:h});return e.jsx(Gn,{scope:s,triggerId:Be(),triggerRef:l,contentId:Be(),open:p,onOpenChange:u,onOpenToggle:a.useCallback(()=>u(d=>!d),[u]),modal:x,children:e.jsx(Mn,{...v,open:p,onOpenChange:u,dir:r,modal:x,children:n})})};Rt.displayName=Ke;var Dt="DropdownMenuTrigger",Pt=a.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...o}=t,c=_t(Dt,n),h=T(n);return e.jsx(En,{asChild:!0,...h,children:e.jsx(re.button,{type:"button",id:c.triggerId,"aria-haspopup":"menu","aria-expanded":c.open,"aria-controls":c.open?c.contentId:void 0,"data-state":c.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...o,ref:tt(s,c.triggerRef),onPointerDown:M(t.onPointerDown,x=>{!r&&x.button===0&&x.ctrlKey===!1&&(c.onOpenToggle(),c.open||x.preventDefault())}),onKeyDown:M(t.onKeyDown,x=>{r||(["Enter"," "].includes(x.key)&&c.onOpenToggle(),x.key==="ArrowDown"&&c.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(x.key)&&x.preventDefault())})})})});Pt.displayName=Dt;var Kn="DropdownMenuPortal",It=t=>{const{__scopeDropdownMenu:s,...n}=t,r=T(s);return e.jsx(Sn,{...r,...n})};It.displayName=Kn;var Tt="DropdownMenuContent",Ot=a.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,o=_t(Tt,n),c=T(n),h=a.useRef(!1);return e.jsx(_n,{id:o.contentId,"aria-labelledby":o.triggerId,...c,...r,ref:s,onCloseAutoFocus:M(t.onCloseAutoFocus,x=>{var v;h.current||(v=o.triggerRef.current)==null||v.focus(),h.current=!1,x.preventDefault()}),onInteractOutside:M(t.onInteractOutside,x=>{const v=x.detail.originalEvent,l=v.button===0&&v.ctrlKey===!0,p=v.button===2||l;(!o.modal||p)&&(h.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Ot.displayName=Tt;var Un="DropdownMenuGroup",zn=a.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,o=T(n);return e.jsx(Rn,{...o,...r,ref:s})});zn.displayName=Un;var Hn="DropdownMenuLabel",Bn=a.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,o=T(n);return e.jsx(Dn,{...o,...r,ref:s})});Bn.displayName=Hn;var Jn="DropdownMenuItem",kt=a.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,o=T(n);return e.jsx(Pn,{...o,...r,ref:s})});kt.displayName=Jn;var qn="DropdownMenuCheckboxItem",Xn=a.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,o=T(n);return e.jsx(In,{...o,...r,ref:s})});Xn.displayName=qn;var Yn="DropdownMenuRadioGroup",Wn=a.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,o=T(n);return e.jsx(Tn,{...o,...r,ref:s})});Wn.displayName=Yn;var Zn="DropdownMenuRadioItem",Qn=a.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,o=T(n);return e.jsx(On,{...o,...r,ref:s})});Qn.displayName=Zn;var er="DropdownMenuItemIndicator",tr=a.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,o=T(n);return e.jsx(kn,{...o,...r,ref:s})});tr.displayName=er;var sr="DropdownMenuSeparator",nr=a.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,o=T(n);return e.jsx(An,{...o,...r,ref:s})});nr.displayName=sr;var rr="DropdownMenuArrow",ar=a.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,o=T(n);return e.jsx(Fn,{...o,...r,ref:s})});ar.displayName=rr;var or="DropdownMenuSubTrigger",cr=a.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,o=T(n);return e.jsx($n,{...o,...r,ref:s})});cr.displayName=or;var lr="DropdownMenuSubContent",ir=a.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,o=T(n);return e.jsx(Ln,{...o,...r,ref:s,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ir.displayName=lr;var dr=Rt,ur=Pt,mr=It,hr=Ot,xr=kt;function At({...t}){return e.jsx(dr,{"data-slot":"dropdown-menu",...t})}function Ft({...t}){return e.jsx(ur,{"data-slot":"dropdown-menu-trigger",...t})}function $t({className:t,sideOffset:s=4,...n}){return e.jsx(mr,{children:e.jsx(hr,{"data-slot":"dropdown-menu-content",sideOffset:s,className:ne("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...n})})}function ce({className:t,inset:s,variant:n="default",...r}){return e.jsx(xr,{"data-slot":"dropdown-menu-item","data-inset":s,"data-variant":n,className:ne("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive-foreground data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/40 data-[variant=destructive]:focus:text-destructive-foreground data-[variant=destructive]:*:[svg]:!text-destructive-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r})}const pr=({collections:t,onLoadRequest:s})=>{const[n,r]=a.useState(t),[o,c]=a.useState({}),[h,x]=a.useState(""),[v,l]=a.useState(""),[p,u]=a.useState(!1),[d,g]=a.useState(!1),[j,C]=a.useState(""),[D,S]=a.useState(null);a.useEffect(()=>{_()},[]);const P=f=>{c(i=>({...i,[f]:!i[f]}))},_=async()=>{try{const f=await Gs();r(f)}catch(f){console.error("Failed to fetch collections:",f)}},O=async()=>{if(h.trim())try{await Ks(h,v),x(""),l(""),u(!1),_()}catch(f){console.error("Failed to create collection:",f)}},G=async f=>{if(confirm("Are you sure you want to delete this collection?"))try{await Us(f),_()}catch(i){console.error("Failed to delete collection:",i)}},K=async f=>{try{const i=await zs(f),w=new Blob([JSON.stringify(i,null,2)],{type:"application/json"}),I=URL.createObjectURL(w),m=document.createElement("a");m.href=I,m.download=`collection-${f}.json`,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(I)}catch(i){console.error("Failed to export collection:",i)}},b=async()=>{S(null);try{const f=JSON.parse(j);console.log("Importing collection:",f),C(""),g(!1),_()}catch{S("Invalid JSON format. Please check your data.")}},F=f=>{switch(f.toUpperCase()){case"GET":return"bg-blue-500";case"POST":return"bg-green-500";case"PUT":return"bg-yellow-500";case"DELETE":return"bg-red-500";case"PATCH":return"bg-purple-500";default:return"bg-gray-500"}};return e.jsxs("div",{className:"p-4 h-[600px] flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"font-semibold",children:"Collections"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(fe,{open:d,onOpenChange:g,children:[e.jsx(Pe,{asChild:!0,children:e.jsxs(N,{variant:"outline",size:"sm",children:[e.jsx(ms,{className:"h-4 w-4 mr-1"}),"Import"]})}),e.jsxs(ve,{children:[e.jsx(je,{children:e.jsx(ge,{children:"Import Collection"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"import-data",children:"Paste Collection JSON"}),e.jsx(_e,{id:"import-data",value:j,onChange:f=>C(f.target.value),placeholder:"Paste Postman or Insomnia collection JSON here...",className:"min-h-[200px]"}),D&&e.jsx("p",{className:"text-sm text-red-500",children:D})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(N,{variant:"outline",onClick:()=>g(!1),children:"Cancel"}),e.jsx(N,{onClick:b,children:"Import"})]})]})]})]}),e.jsxs(fe,{open:p,onOpenChange:u,children:[e.jsx(Pe,{asChild:!0,children:e.jsxs(N,{variant:"default",size:"sm",children:[e.jsx(X,{className:"h-4 w-4 mr-1"}),"New"]})}),e.jsxs(ve,{children:[e.jsx(je,{children:e.jsx(ge,{children:"Create New Collection"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"collection-name",children:"Name"}),e.jsx(k,{id:"collection-name",value:h,onChange:f=>x(f.target.value),placeholder:"My Collection"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"collection-description",children:"Description (Optional)"}),e.jsx(_e,{id:"collection-description",value:v,onChange:f=>l(f.target.value),placeholder:"Collection description..."})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(N,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),e.jsx(N,{onClick:O,disabled:!h.trim(),children:"Create"})]})]})]})]})]})]}),e.jsx("div",{className:"flex-1 overflow-auto",children:n.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:[e.jsx(Re,{className:"h-8 w-8 mb-2"}),e.jsx("p",{className:"text-center",children:"No collections yet"}),e.jsxs(N,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>u(!0),children:[e.jsx(X,{className:"h-4 w-4 mr-1"}),"Create Collection"]})]}):e.jsx("div",{className:"space-y-1",children:n.map(f=>e.jsxs("div",{className:"border rounded-md overflow-hidden mb-2",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 cursor-pointer",onClick:()=>P(f.id),children:[e.jsxs("div",{className:"flex items-center",children:[o[f.id]?e.jsx(hs,{className:"h-4 w-4 mr-2"}):e.jsx(xs,{className:"h-4 w-4 mr-2"}),e.jsx(Re,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"font-medium",children:f.name}),e.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",f.requests.length,")"]})]}),e.jsxs(At,{children:[e.jsx(Ft,{asChild:!0,children:e.jsx(N,{variant:"ghost",size:"sm",children:e.jsx(nt,{className:"h-4 w-4"})})}),e.jsxs($t,{align:"end",children:[e.jsxs(ce,{onClick:()=>K(f.id),children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"Export"]}),e.jsxs(ce,{children:[e.jsx(rt,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsxs(ce,{className:"text-red-500",onClick:()=>G(f.id),children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]}),o[f.id]&&e.jsx("div",{className:"pl-8 pr-2 py-2",children:f.requests.length===0?e.jsx("div",{className:"text-center text-gray-400 py-2 text-sm",children:"No requests in this collection"}):e.jsx("div",{className:"space-y-2",children:f.requests.map(i=>e.jsxs("div",{className:"flex justify-between items-center p-2 hover:bg-gray-50 rounded cursor-pointer",onClick:()=>s(i),children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Is,{className:"h-4 w-4 mr-2 text-gray-400"}),e.jsx("span",{className:"text-sm",children:i.name})]}),e.jsx(he,{className:`${F(i.method)} text-white`,children:i.method})]},i.id))})})]},f.id))})})]})},fr=({environments:t,activeEnvironment:s})=>{const[n,r]=a.useState(t),[o,c]=a.useState(s),[h,x]=a.useState(!1),[v,l]=a.useState(!1),[p,u]=a.useState(null),[d,g]=a.useState(""),[j,C]=a.useState(""),[D,S]=a.useState(""),[P,_]=a.useState({});a.useEffect(()=>{O()},[]);const O=async()=>{try{const m=await Hs();r(m);const E=await Bs();c(E)}catch(m){console.error("Failed to fetch environments:",m)}},G=async()=>{if(d.trim())try{await Js(d,P),g(""),_({}),C(""),S(""),x(!1),O()}catch(m){console.error("Failed to create environment:",m)}},K=async m=>{try{await Ys(m),O()}catch(E){console.error("Failed to set active environment:",E)}},b=async m=>{if(confirm("Are you sure you want to delete this environment?"))try{await Xs(m),O()}catch(E){console.error("Failed to delete environment:",E)}},F=m=>{u(m),_({...m.variables}),l(!0)},f=async()=>{if(p)try{await qs(p.id,{variables:P}),l(!1),u(null),O()}catch(m){console.error("Failed to update environment:",m)}},i=()=>{j.trim()&&(_(m=>({...m,[j]:D})),C(""),S(""))},w=m=>{const E={...P};delete E[m],_(E)},I=(m,E)=>{_(Y=>({...Y,[m]:E}))};return e.jsxs("div",{className:"p-4 h-[600px] flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"font-semibold",children:"Environments"}),e.jsxs(fe,{open:h,onOpenChange:x,children:[e.jsx(Pe,{asChild:!0,children:e.jsxs(N,{variant:"default",size:"sm",children:[e.jsx(X,{className:"h-4 w-4 mr-1"}),"New"]})}),e.jsxs(ve,{children:[e.jsx(je,{children:e.jsx(ge,{children:"Create New Environment"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"environment-name",children:"Name"}),e.jsx(k,{id:"environment-name",value:d,onChange:m=>g(m.target.value),placeholder:"Development, Production, etc."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{children:"Variables"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("div",{className:"flex-1",children:e.jsx(k,{placeholder:"Variable name",value:j,onChange:m=>C(m.target.value)})}),e.jsx("div",{className:"flex-1",children:e.jsx(k,{placeholder:"Value",value:D,onChange:m=>S(m.target.value)})}),e.jsx(N,{variant:"outline",onClick:i,disabled:!j.trim(),children:e.jsx(X,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"border rounded-md max-h-40 overflow-y-auto",children:Object.keys(P).length===0?e.jsx("div",{className:"p-4 text-center text-gray-500 text-sm",children:"No variables added yet"}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"py-2 px-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Value"}),e.jsx("th",{className:"py-2 px-3 w-10"})]})}),e.jsx("tbody",{children:Object.entries(P).map(([m,E])=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"py-2 px-3 text-sm",children:m}),e.jsx("td",{className:"py-2 px-3 text-sm font-mono",children:E}),e.jsx("td",{className:"py-2 px-3",children:e.jsx(N,{variant:"ghost",size:"sm",onClick:()=>w(m),children:e.jsx(W,{className:"h-3 w-3 text-gray-500"})})})]},m))})]})})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(N,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),e.jsx(N,{onClick:G,disabled:!d.trim(),children:"Create"})]})]})]})]})]}),p&&e.jsx(fe,{open:v,onOpenChange:l,children:e.jsxs(ve,{children:[e.jsx(je,{children:e.jsxs(ge,{children:["Edit Environment: ",p.name]})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{children:"Variables"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("div",{className:"flex-1",children:e.jsx(k,{placeholder:"Variable name",value:j,onChange:m=>C(m.target.value)})}),e.jsx("div",{className:"flex-1",children:e.jsx(k,{placeholder:"Value",value:D,onChange:m=>S(m.target.value)})}),e.jsx(N,{variant:"outline",onClick:i,disabled:!j.trim(),children:e.jsx(X,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"border rounded-md max-h-40 overflow-y-auto",children:Object.keys(P).length===0?e.jsx("div",{className:"p-4 text-center text-gray-500 text-sm",children:"No variables added yet"}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"py-2 px-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Value"}),e.jsx("th",{className:"py-2 px-3 w-10"})]})}),e.jsx("tbody",{children:Object.entries(P).map(([m,E])=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"py-2 px-3 text-sm",children:m}),e.jsx("td",{className:"py-2 px-3",children:e.jsx(k,{value:E,onChange:Y=>I(m,Y.target.value),className:"h-7 py-1"})}),e.jsx("td",{className:"py-2 px-3",children:e.jsx(N,{variant:"ghost",size:"sm",onClick:()=>w(m),children:e.jsx(W,{className:"h-3 w-3 text-gray-500"})})})]},m))})]})})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(N,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),e.jsx(N,{onClick:f,children:"Save Changes"})]})]})]})}),e.jsx("div",{className:"flex-1 overflow-auto",children:n.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:[e.jsx(De,{className:"h-8 w-8 mb-2"}),e.jsx("p",{className:"text-center",children:"No environments yet"}),e.jsxs(N,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>x(!0),children:[e.jsx(X,{className:"h-4 w-4 mr-1"}),"Create Environment"]})]}):e.jsx("div",{className:"space-y-2",children:n.map(m=>e.jsxs("div",{className:`border rounded-md p-3 ${m.isActive?"bg-primary/10 border-primary":"bg-white"}`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(De,{className:`h-4 w-4 mr-2 ${m.isActive?"text-primary":"text-gray-400"}`}),e.jsx("span",{className:"font-medium",children:m.name}),m.isActive&&e.jsx("span",{className:"ml-2 text-xs bg-primary text-white px-1.5 py-0.5 rounded-full",children:"Active"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!m.isActive&&e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>K(m.id),children:[e.jsx(Te,{className:"h-3 w-3 mr-1"}),"Use"]}),e.jsxs(At,{children:[e.jsx(Ft,{asChild:!0,children:e.jsx(N,{variant:"ghost",size:"sm",children:e.jsx(nt,{className:"h-4 w-4"})})}),e.jsxs($t,{align:"end",children:[e.jsxs(ce,{onClick:()=>F(m),children:[e.jsx(rt,{className:"h-4 w-4 mr-2"}),"Edit Variables"]}),e.jsxs(ce,{className:"text-red-500",onClick:()=>b(m.id),children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})]}),e.jsxs("div",{className:"mt-2 border-t pt-2",children:[e.jsx("div",{className:"text-xs font-medium mb-1 text-gray-500",children:"Variables"}),Object.keys(m.variables).length===0?e.jsx("div",{className:"text-xs text-gray-400 italic",children:"No variables defined"}):e.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:Object.entries(m.variables).map(([E,Y])=>e.jsxs("div",{className:"flex text-xs",children:[e.jsxs("span",{className:"font-mono font-medium mr-2",children:[E,":"]}),e.jsx("span",{className:"font-mono text-gray-600 truncate",children:Y})]},E))})]})]},m.id))})}),e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-md text-sm",children:[e.jsx("h4",{className:"font-medium mb-1",children:"How to use environment variables"}),e.jsx("p",{className:"text-gray-600 text-xs mb-2",children:"Use double curly braces to reference variables in your requests."}),e.jsxs("div",{className:"bg-gray-100 rounded p-2 font-mono text-xs",children:["https://api.example.com/users/","{{userId}}",e.jsx("br",{}),"Authorization: Bearer ","{{authToken}}"]})]})]})},vr=({history:t,onLoadRequest:s,onClearHistory:n})=>{const[r,o]=a.useState(""),c=l=>new Date(l).toLocaleString(),h=t.filter(l=>{const p=r.toLowerCase();return l.url.toLowerCase().includes(p)||l.method.toLowerCase().includes(p)}),x=l=>{switch(l.toUpperCase()){case"GET":return"bg-blue-500";case"POST":return"bg-green-500";case"PUT":return"bg-yellow-500";case"DELETE":return"bg-red-500";case"PATCH":return"bg-purple-500";default:return"bg-gray-500"}},v=l=>l>=200&&l<300?"bg-green-500":l>=300&&l<400?"bg-blue-500":l>=400&&l<500?"bg-yellow-500":l>=500?"bg-red-500":"bg-gray-500";return e.jsxs("div",{className:"p-4 h-[600px] flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"font-semibold",children:"Request History"}),e.jsxs(N,{variant:"outline",size:"sm",onClick:n,className:"text-gray-500",children:[e.jsx(W,{className:"h-4 w-4 mr-1"}),"Clear"]})]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(_s,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-400"}),e.jsx(k,{placeholder:"Search requests",className:"pl-8",value:r,onChange:l=>o(l.target.value)})]}),e.jsx("div",{className:"flex-1 overflow-auto",children:h.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:[e.jsx(ps,{className:"h-8 w-8 mb-2"}),e.jsx("p",{className:"text-center",children:t.length===0?"No request history yet":"No matching requests found"})]}):e.jsx("div",{className:"space-y-3",children:h.map(l=>e.jsxs("div",{className:"border rounded-md p-3 hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>s(l),children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx(he,{className:`${x(l.method)} text-white`,children:l.method}),l.response&&e.jsx(he,{className:`${v(l.response.status)}`,children:l.response.status})]}),e.jsx("div",{className:"mb-1 truncate text-sm font-medium",children:l.url}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-gray-500",children:c(l.timestamp)}),e.jsx(N,{size:"sm",variant:"ghost",children:e.jsx(Te,{className:"h-3 w-3"})})]})]},l.id))})})]})},jr=["GET","POST","PUT","DELETE","PATCH","HEAD","OPTIONS"],gr=({request:t,setRequest:s,isLoading:n})=>{const[r,o]=a.useState("params"),[c,h]=a.useState(""),[x,v]=a.useState(""),[l,p]=a.useState(""),[u,d]=a.useState(""),[g,j]=a.useState("json"),[C,D]=a.useState(null),S=i=>{s(w=>({...w,url:i.target.value}))},P=i=>{s(w=>({...w,method:i}))},_=()=>{if(!c.trim())return;const i={...t.headers};i[c]=x,s(w=>({...w,headers:i})),h(""),v("")},O=i=>{const w={...t.headers};delete w[i],s(I=>({...I,headers:w}))},G=()=>{if(!l.trim())return;const i={...t.params};i[l]=u,s(w=>({...w,params:i})),p(""),d("")},K=i=>{const w={...t.params};delete w[i],s(I=>({...I,params:w}))},b=i=>{if(D(null),g==="json")try{if(i.trim()){const w=JSON.parse(i);s(I=>({...I,body:w}))}else s(w=>({...w,body:null}))}catch{D("Invalid JSON format"),s(I=>({...I,body:i}))}else s(w=>({...w,body:i}))},F=()=>{if(typeof t.body=="string")try{const i=JSON.parse(t.body),w=JSON.stringify(i,null,2);return s(I=>({...I,body:i})),w}catch{return t.body}else if(t.body)return JSON.stringify(t.body,null,2);return""},f=()=>g==="json"?F():typeof t.body=="string"?t.body:t.body?JSON.stringify(t.body):"";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"w-32",children:[e.jsx(L,{htmlFor:"method",children:"Method"}),e.jsxs(fs,{value:t.method,onValueChange:P,disabled:n,children:[e.jsx(vs,{id:"method",className:"w-full",children:e.jsx(js,{placeholder:"Select method"})}),e.jsx(gs,{children:jr.map(i=>e.jsx(ys,{value:i,children:i},i))})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx(L,{htmlFor:"url",children:"URL"}),e.jsx(k,{id:"url",placeholder:"https://api.example.com/endpoint",value:t.url,onChange:S,disabled:n})]})]}),e.jsxs(xe,{value:r,onValueChange:o,className:"w-full",children:[e.jsxs(pe,{className:"grid w-full grid-cols-3",children:[e.jsx(H,{value:"params",children:"Query Params"}),e.jsx(H,{value:"headers",children:"Headers"}),e.jsx(H,{value:"body",children:"Body"})]}),e.jsx(B,{value:"params",className:"border rounded-md p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(L,{htmlFor:"param-key",children:"Key"}),e.jsx(k,{id:"param-key",placeholder:"parameter name",value:l,onChange:i=>p(i.target.value),disabled:n})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx(L,{htmlFor:"param-value",children:"Value"}),e.jsx(k,{id:"param-value",placeholder:"value",value:u,onChange:i=>d(i.target.value),disabled:n})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(N,{variant:"outline",onClick:G,disabled:n||!l.trim(),children:e.jsx(X,{className:"h-4 w-4"})})})]}),e.jsxs("div",{className:"space-y-2",children:[Object.entries(t.params||{}).map(([i,w])=>e.jsxs("div",{className:"flex items-center gap-2 border rounded-md p-2",children:[e.jsx("div",{className:"flex-1 font-medium text-sm",children:i}),e.jsx("div",{className:"flex-1 text-sm truncate",children:w}),e.jsx(N,{variant:"ghost",size:"sm",onClick:()=>K(i),disabled:n,children:e.jsx(W,{className:"h-3 w-3 text-red-500"})})]},i)),Object.keys(t.params||{}).length===0&&e.jsx("div",{className:"text-sm text-gray-500 italic text-center py-2",children:"No query parameters added"})]})]})}),e.jsx(B,{value:"headers",className:"border rounded-md p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(L,{htmlFor:"header-key",children:"Key"}),e.jsx(k,{id:"header-key",placeholder:"Content-Type",value:c,onChange:i=>h(i.target.value),disabled:n})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx(L,{htmlFor:"header-value",children:"Value"}),e.jsx(k,{id:"header-value",placeholder:"application/json",value:x,onChange:i=>v(i.target.value),disabled:n})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(N,{variant:"outline",onClick:_,disabled:n||!c.trim(),children:e.jsx(X,{className:"h-4 w-4"})})})]}),e.jsxs("div",{className:"space-y-2",children:[Object.entries(t.headers||{}).map(([i,w])=>e.jsxs("div",{className:"flex items-center gap-2 border rounded-md p-2",children:[e.jsx("div",{className:"flex-1 font-medium text-sm",children:i}),e.jsx("div",{className:"flex-1 text-sm truncate",children:w}),e.jsx(N,{variant:"ghost",size:"sm",onClick:()=>O(i),disabled:n,children:e.jsx(W,{className:"h-3 w-3 text-red-500"})})]},i)),Object.keys(t.headers||{}).length===0&&e.jsx("div",{className:"text-sm text-gray-500 italic text-center py-2",children:"No headers added"})]})]})}),e.jsx(B,{value:"body",className:"border rounded-md p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{variant:g==="json"?"default":"outline",size:"sm",onClick:()=>j("json"),disabled:n,children:"JSON"}),e.jsx(N,{variant:g==="text"?"default":"outline",size:"sm",onClick:()=>j("text"),disabled:n,children:"Text"}),e.jsx(N,{variant:g==="form"?"default":"outline",size:"sm",onClick:()=>j("form"),disabled:n||!0,children:"Form (Soon)"})]}),g==="json"&&e.jsx(N,{variant:"outline",size:"sm",onClick:()=>b(F()),disabled:n,children:"Format"})]}),["GET","HEAD"].includes(t.method)?e.jsx("div",{className:"flex items-center justify-center h-32 text-gray-500",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(Ns,{className:"h-8 w-8 mb-2"}),e.jsxs("p",{children:["The ",t.method," method typically doesn't include a request body."]})]})}):e.jsxs(e.Fragment,{children:[e.jsx(_e,{placeholder:g==="json"?`{
  "key": "value"
}`:"Request body...",className:"min-h-[200px] font-mono",value:f(),onChange:i=>b(i.target.value),disabled:n}),C&&e.jsx("p",{className:"text-sm text-red-500",children:C})]})]})})]})]})},yr=({response:t,error:s,isLoading:n})=>{const[r,o]=a.useState("body"),[c,h]=a.useState(!1),x=d=>{try{return JSON.stringify(d,null,2)}catch{return typeof d=="string"?d:String(d)}},v=d=>{navigator.clipboard.writeText(d).then(()=>{h(!0),setTimeout(()=>h(!1),2e3)})},l=()=>{if(t){if(r==="body")v(x(t.data));else if(r==="headers"){const d=Object.entries(t.headers).map(([g,j])=>`${g}: ${j}`).join(`
`);v(d)}}},p=()=>{if(!t)return;const d=JSON.stringify(r==="body"?t.data:t.headers,null,2),g=new Blob([d],{type:"application/json"}),j=URL.createObjectURL(g),C=document.createElement("a");C.href=j,C.download=r==="body"?"response-body.json":"response-headers.json",document.body.appendChild(C),C.click(),document.body.removeChild(C),URL.revokeObjectURL(j)},u=d=>d>=200&&d<300?"bg-green-500":d>=300&&d<400?"bg-blue-500":d>=400&&d<500?"bg-yellow-500":d>=500?"bg-red-500":"bg-gray-500";return n?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"})}):s?e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-red-500",children:[e.jsx(ws,{className:"h-12 w-12 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Request Error"}),e.jsx("p",{className:"text-center",children:s})]}):t?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center border rounded-md p-3 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(he,{className:`${u(t.status)} text-white`,children:[t.status," ",t.statusText]}),e.jsxs("span",{className:"text-sm",children:["Time: ",e.jsxs("span",{className:"font-semibold",children:[t.responseTime,"ms"]})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Rs,{className:"h-5 w-5 text-green-500 mr-2"}),e.jsx("span",{className:"text-sm text-green-600",children:"Request Successful"})]})]}),e.jsxs(xe,{value:r,onValueChange:o,className:"w-full",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs(pe,{children:[e.jsx(H,{value:"body",children:"Body"}),e.jsx(H,{value:"headers",children:"Headers"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{variant:"outline",size:"sm",onClick:l,children:c?"Copied!":e.jsxs(e.Fragment,{children:[e.jsx(bs,{className:"h-4 w-4 mr-1"}),"Copy"]})}),e.jsxs(N,{variant:"outline",size:"sm",onClick:p,children:[e.jsx(st,{className:"h-4 w-4 mr-1"}),"Download"]})]})]}),e.jsx(B,{value:"body",className:"p-0",children:e.jsx("div",{className:"border rounded-md p-4 bg-gray-50 overflow-auto max-h-[400px]",children:e.jsx("pre",{className:"font-mono text-sm whitespace-pre-wrap",children:x(t.data)})})}),e.jsx(B,{value:"headers",className:"p-0",children:e.jsx("div",{className:"border rounded-md p-4 bg-gray-50 overflow-auto max-h-[400px]",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left font-semibold text-sm pb-2",children:"Name"}),e.jsx("th",{className:"text-left font-semibold text-sm pb-2",children:"Value"})]})}),e.jsx("tbody",{children:Object.entries(t.headers).map(([d,g])=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"py-2 pr-4 font-mono text-sm font-medium",children:d}),e.jsx("td",{className:"py-2 font-mono text-sm break-all",children:g})]},d))})]})})})]})]}):e.jsx("div",{className:"flex flex-col items-center justify-center h-64 text-gray-400",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl mb-2",children:"No Response Yet"}),e.jsx("p",{children:"Send a request to see the response here"})]})})};function _r(){const[t,s]=a.useState({url:"",method:"GET",headers:{},params:{},body:null}),[n,r]=a.useState(null),[o,c]=a.useState(!1),[h,x]=a.useState(null),[v,l]=a.useState("request"),[p,u]=a.useState([]),[d,g]=a.useState([]),[j,C]=a.useState(null),[D,S]=a.useState([]);a.useEffect(()=>{P()},[]);const P=async()=>{try{const[b,F,f,i]=await Promise.all([Fs.getAll(),qe.getAll(),qe.getActive(),Xe()]);u(b.data),g(F.data),C(f.data),S(i)}catch(b){console.error("Failed to load data:",b)}},_=async()=>{c(!0),x(null),r(null);try{const b={...t,url:$s(t.url,(j==null?void 0:j.variables)||{})},F=await Ls(b);r(F),l("response");const f=await Xe();S(f)}catch(b){x(b.message||"Request failed")}finally{c(!1)}},O=async()=>{try{await Vs(),S([])}catch(b){console.error("Error clearing history:",b)}},G=b=>{s({url:b.url,method:b.method,headers:b.headers||{},params:b.params||{},body:b.body||null}),l("request")},K=()=>{s({url:"",method:"GET",headers:{},params:{},body:null}),r(null),x(null)};return e.jsx("div",{className:"min-h-screen",children:e.jsxs("div",{className:"container mx-auto p-4 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs(Je,{to:"/dashboard",className:"flex items-center text-primary",children:[e.jsx(Cs,{className:"h-5 w-5 mr-2"}),e.jsx("span",{children:"Back to Dashboard"})]}),e.jsx("h1",{className:"text-3xl font-bold text-center",children:"API Request Tester"}),e.jsxs(Je,{to:"/api-tester/docs",className:"flex items-center text-primary",children:[e.jsx("span",{children:"Documentation"}),e.jsx(Te,{className:"h-5 w-5 ml-2"})]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsx("div",{className:"flex-1",children:e.jsxs(xe,{value:v,onValueChange:l,children:[e.jsxs(pe,{className:"grid grid-cols-2",children:[e.jsx(H,{value:"request",children:"Request"}),e.jsx(H,{value:"response",children:"Response"})]}),e.jsx(B,{value:"request",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-5",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Request"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(N,{variant:"outline",onClick:K,disabled:o,children:[e.jsx(Ms,{className:"h-4 w-4 mr-2"}),"Reset"]}),e.jsx(N,{onClick:_,disabled:!t.url||o,children:o?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin h-4 w-4 mr-2 border-2 border-white border-t-transparent rounded-full"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Es,{className:"h-4 w-4 mr-2"}),"Send Request"]})})]})]}),e.jsx(gr,{request:t,setRequest:s,isLoading:o})]})}),e.jsx(B,{value:"response",children:e.jsx("div",{className:"bg-white rounded-lg shadow p-5 min-h-[500px]",children:e.jsx(yr,{response:n,error:h,isLoading:o})})})]})}),e.jsx("div",{className:"w-full lg:w-80 bg-white rounded-lg shadow",children:e.jsxs(xe,{defaultValue:"history",className:"w-full",children:[e.jsxs(pe,{className:"grid grid-cols-3",children:[e.jsxs(H,{value:"history",children:[e.jsx(Ss,{className:"h-4 w-4 mr-1"}),"History"]}),e.jsxs(H,{value:"collections",children:[e.jsx(Re,{className:"h-4 w-4 mr-1"}),"Collections"]}),e.jsxs(H,{value:"environments",children:[e.jsx(De,{className:"h-4 w-4 mr-1"}),"Env"]})]}),e.jsx(B,{value:"history",children:e.jsx(vr,{history:D,onLoadRequest:G,onClearHistory:O})}),e.jsx(B,{value:"collections",children:e.jsx(pr,{collections:p,onLoadRequest:G})}),e.jsx(B,{value:"environments",children:e.jsx(fr,{environments:d,activeEnvironment:j})})]})})]})]})})}export{_r as default};
