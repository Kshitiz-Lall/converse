import{e as K,z as H,r as n,j as e,L as A,E as Q,A as X,I as k,B as N,U as Y,G as f,J as Z,K as O,S as ee,g as se,h as ae,i as te,k as ie,M as le,N as R,D as T,O as re,n as ne,o as ce,p as oe,q as de,s as me,v as he,w as xe,y as m}from"./index-DKgF71w0.js";import{A as pe}from"./index-CWT3di6J.js";import{C as F}from"./circle-x-C5sI0Fiz.js";import{C as _}from"./circle-check-big-C4a9-WjG.js";/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],fe=K("RefreshCcw",ue),L=H.create({baseURL:pe}),E={optimizeImage:async(r,t)=>{const i=new FormData;i.append("image",r),t.quality&&i.append("quality",t.quality.toString()),t.width&&i.append("width",t.width.toString()),t.height&&i.append("height",t.height.toString()),t.format&&i.append("format",t.format),t.maintain_aspect_ratio!==void 0&&i.append("maintain_aspect_ratio",t.maintain_aspect_ratio.toString());try{return(await L.post("/image/optimize",i,{responseType:"blob",headers:{"Content-Type":"multipart/form-data"}})).data}catch{throw new Error("Failed to optimize image")}},getOptimizedImageStats:async(r,t)=>{const i=new FormData;i.append("image",r),t.quality&&i.append("quality",t.quality.toString()),t.width&&i.append("width",t.width.toString()),t.height&&i.append("height",t.height.toString()),t.format&&i.append("format",t.format),t.maintain_aspect_ratio!==void 0&&i.append("maintain_aspect_ratio",t.maintain_aspect_ratio.toString());try{return(await L.post("/image/optimize?stats=true",i,{headers:{"Content-Type":"multipart/form-data"}})).data.data}catch{throw new Error("Failed to get image stats")}}},ge=[{value:"jpeg",label:"JPEG"},{value:"png",label:"PNG"},{value:"webp",label:"WebP (recommended)"},{value:"avif",label:"AVIF"}],M=[{value:"about",label:"About"},{value:"tips",label:"Tips"},{value:"formats",label:"Format Guide"}],je=[{title:"About Image Optimizer",text:"This tool helps you optimize images for web use by compressing them and converting to more efficient formats. Properly optimized images load faster and use less bandwidth, improving your website performance.",features:["Compress images with adjustable quality levels","Resize images to specific dimensions","Convert between formats (JPEG, PNG, WebP, AVIF)","Maintain aspect ratio option","Instant preview of results"]}],ve=[{title:"Tips for Optimization",tips:[{text:"Choose the right format: WebP is the best all-around format for most images. JPEG is good for photos, PNG for images with transparency, and AVIF for maximum compression."},{text:"Adjust quality wisely: For most web images, a quality setting between 70-85% offers a good balance between size and visual quality."},{text:"Resize to actual display size: There's no need to load a 2000px image if it will display at 800px on your site."},{text:"Check file sizes: For typical web images, aim for under 200KB per image, ideally under 100KB for better performance."}]}],Ne=[{format:"WebP",description:"Modern format with excellent compression and quality.",features:["✅ Excellent compression","✅ Supports transparency","✅ Supported by all modern browsers","❌ Limited support in older browsers"]},{format:"JPEG",description:"Standard format for photos and complex images.",features:["✅ Universal compatibility","✅ Good for photographs","❌ No transparency support","❌ Lossy compression artifacts"]},{format:"PNG",description:"Lossless format ideal for graphics with transparency.",features:["✅ Supports transparency","✅ No quality loss","❌ Larger file sizes","❌ Not ideal for photos"]},{format:"AVIF",description:"Newest format with best compression ratios.",features:["✅ Superior compression","✅ Excellent quality","❌ Limited browser support","❌ Slower encoding"]}];function Se(){const[r,t]=n.useState(null),[i,h]=n.useState(null),[p,b]=n.useState(null),[d,C]=n.useState(!1),[I,x]=n.useState(null),[c,w]=n.useState(null),[y,q]=n.useState(80),[z,U]=n.useState(void 0),[S,D]=n.useState(void 0),[g,G]=n.useState("webp"),[P,B]=n.useState(!0),j=n.useRef(null),W=s=>{var o;const a=(o=s.target.files)==null?void 0:o[0];if(!a)return;if(b(null),w(null),x(null),!a.type.startsWith("image/")){x("Please select a valid image file"),m.error("Invalid file type",{description:"Please select a valid image file (JPEG, PNG, WebP, AVIF)",icon:e.jsx(F,{className:"h-4 w-4"})}),s.target.value="";return}if(a.size>10*1024*1024){x("File size exceeds 10MB limit"),m.error("File too large",{description:"Maximum file size is 10MB",icon:e.jsx(F,{className:"h-4 w-4"})}),s.target.value="";return}t(a);const l=new FileReader;l.onload=()=>{h(l.result),m.success("Image uploaded",{description:`${a.name} (${v(a.size)})`,icon:e.jsx(_,{className:"h-4 w-4"})})},l.readAsDataURL(a)},V=()=>{t(null),h(null),b(null),w(null),x(null),j.current&&(j.current.value=""),m.info("Image cleared",{description:"Upload a new image to optimize"})},$=async()=>{if(r){C(!0),x(null),m.loading("Optimizing image...",{description:"This may take a few seconds",id:"optimize-image"});try{const s={quality:y,format:g,maintain_aspect_ratio:P};z&&(s.width=z),S&&(s.height=S);const a=await E.optimizeImage(r,s),l=URL.createObjectURL(a);b(l);const o=await E.getOptimizedImageStats(r,s);w(o),m.success("Image optimized successfully",{description:`Reduced by ${o.compressionRatio}`,icon:e.jsx(_,{className:"h-4 w-4"}),id:"optimize-image"})}catch(s){const a=s instanceof Error?s.message:"Failed to optimize image";x(a),m.error("Optimization failed",{description:a,icon:e.jsx(F,{className:"h-4 w-4"}),id:"optimize-image"})}finally{C(!1)}}},J=()=>{if(!p||!r)return;const s=g==="jpeg"?"jpg":g,a=`optimized-${r.name.split(".")[0]}.${s}`,l=document.createElement("a");l.href=p,l.download=a,document.body.appendChild(l),l.click(),document.body.removeChild(l),m.success("Image downloaded",{description:a,icon:e.jsx(T,{className:"h-4 w-4"})})},v=s=>s<1024?s+" B":s<1024*1024?(s/1024).toFixed(1)+" KB":(s/(1024*1024)).toFixed(1)+" MB";return e.jsx("div",{className:"bg-gray-50 min-h-screen",children:e.jsxs("div",{className:"container mx-auto p-4 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs(A,{to:"/dashboard",className:"flex items-center text-primary hover:text-primary/80 transition-colors",children:[e.jsx(Q,{className:"h-5 w-5 mr-2"}),e.jsx("span",{children:"Back to Dashboard"})]}),e.jsx("h1",{className:"text-3xl font-bold text-center",children:"Image Optimizer"}),e.jsxs(A,{to:"/image-optimizer/docs",className:"flex items-center text-primary hover:text-primary/80 transition-colors",children:[e.jsx("span",{children:"Goto Documentation"}),e.jsx(X,{className:"h-5 w-5 ml-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex flex-col gap-5 bg-white rounded-lg shadow-md p-5",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h2",{className:"text-xl font-semibold",children:"Upload Image"})}),e.jsx("div",{className:`border-2 border-dashed rounded-lg p-8 text-center ${r?"border-primary":"border-gray-300"}`,children:r?e.jsxs("div",{className:"flex flex-col items-center",children:[i&&e.jsx("div",{className:"mb-4 overflow-hidden max-h-32",children:e.jsx("img",{src:i,alt:"Preview",className:"max-h-32 object-contain"})}),e.jsx("p",{className:"text-sm font-medium",children:r.name}),e.jsx("p",{className:"text-xs text-gray-500",children:v(r.size)}),e.jsx("div",{className:"flex gap-2 mt-4",children:e.jsx(N,{variant:"outline",size:"sm",onClick:V,children:"Choose Different"})})]}):e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(k,{className:"h-12 w-12 text-gray-400 mb-4"}),e.jsx("p",{className:"mb-2 text-sm text-gray-500",children:"Click to upload or drag and drop"}),e.jsx("p",{className:"text-xs text-gray-400",children:"JPEG, PNG, WebP or AVIF (max 10MB)"}),e.jsxs(N,{variant:"ghost",className:"mt-4",onClick:()=>{var s;return(s=j.current)==null?void 0:s.click()},children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),"Select File"]}),e.jsx("input",{type:"file",className:"hidden",onChange:W,accept:"image/*",ref:j})]})}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Optimization Settings"}),e.jsxs("div",{className:"mb-5",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx(f,{htmlFor:"quality",children:"Quality"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[y,"%"]})]}),e.jsx(Z,{id:"quality",min:1,max:100,step:1,value:[y],onValueChange:s=>q(s[0]),disabled:d}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Lower quality = smaller file size"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-5",children:[e.jsxs("div",{children:[e.jsx(f,{htmlFor:"width",children:"Width (px)"}),e.jsx(O,{id:"width",type:"number",placeholder:"Auto",value:z||"",onChange:s=>U(s.target.value?parseInt(s.target.value):void 0),disabled:d})]}),e.jsxs("div",{children:[e.jsx(f,{htmlFor:"height",children:"Height (px)"}),e.jsx(O,{id:"height",type:"number",placeholder:"Auto",value:S||"",onChange:s=>D(s.target.value?parseInt(s.target.value):void 0),disabled:d})]})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx(f,{htmlFor:"format",children:"Output Format"}),e.jsxs(ee,{value:g,onValueChange:G,disabled:d,children:[e.jsx(se,{id:"format",children:e.jsx(ae,{placeholder:"Select format"})}),e.jsx(te,{children:ge.map(s=>e.jsx(ie,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 mb-5",children:[e.jsx(le,{id:"aspect-ratio",checked:P,onCheckedChange:B,disabled:d}),e.jsx(f,{htmlFor:"aspect-ratio",children:"Maintain aspect ratio"})]}),e.jsx(N,{className:"w-full",onClick:$,disabled:!r||d,children:d?e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"mr-2 h-4 w-4 animate-spin"}),"Optimizing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"mr-2 h-4 w-4"}),"Optimize Image"]})})]})]}),e.jsxs("div",{className:"flex flex-col gap-4 bg-white rounded-lg shadow-md p-5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Result"}),p&&e.jsxs(N,{variant:"outline",size:"sm",onClick:J,children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),"Download"]})]}),e.jsx("div",{className:"flex-1 flex flex-col items-center justify-center border rounded-lg p-4",children:d?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[e.jsx(R,{className:"h-8 w-8 animate-spin text-primary mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Processing your image..."})]}):p?e.jsxs("div",{className:"flex flex-col items-center w-full",children:[e.jsx("div",{className:"max-h-[300px] overflow-hidden mb-4 w-full flex justify-center",children:e.jsx("img",{src:p,alt:"Optimized",className:"max-h-[300px] object-contain"})}),c&&e.jsxs("div",{className:"w-full mt-4 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("h3",{className:"text-sm font-medium mb-3 flex items-center",children:[e.jsx(re,{className:"h-4 w-4 mr-1"}),"Optimization Results"]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-gray-500",children:"File Size Comparison"}),e.jsxs("span",{className:"font-medium",children:[c.compressionRatio," reduced"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsx("span",{children:"Original"}),e.jsx("span",{children:v(c.originalSize)})]}),e.jsx("div",{className:"h-3 w-full bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gray-400 rounded-full",style:{width:"100%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsx("span",{children:"Optimized"}),e.jsx("span",{children:v(c.newSize)})]}),e.jsx("div",{className:"h-3 w-full bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-green-500 rounded-full",style:{width:`${c.newSize/c.originalSize*100}%`}})})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-y-2 text-sm flex-1",children:[e.jsx("div",{className:"text-gray-500",children:"Format:"}),e.jsx("div",{className:"font-medium",children:c.format.toUpperCase()}),e.jsx("div",{className:"text-gray-500",children:"Dimensions:"}),e.jsxs("div",{className:"font-medium",children:[c.width," × ",c.height,"px"]})]}),e.jsxs("div",{className:"relative h-20 w-20 flex items-center justify-center",children:[e.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",children:[e.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"#e5e7eb",strokeWidth:"10"}),e.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"#22c55e",strokeWidth:"10",strokeLinecap:"round",strokeDasharray:`${2*Math.PI*45}`,strokeDashoffset:`${2*Math.PI*45*(1-parseFloat(c.compressionRatio)/100)}`,transform:"rotate(-90 50 50)"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center font-medium text-lg",children:c.compressionRatio})]})]})]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[e.jsx(k,{className:"h-12 w-12 text-gray-300 mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Optimized image will appear here"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:'Upload an image and click "Optimize" to get started'})]})}),I&&e.jsxs(ne,{variant:"destructive",children:[e.jsx(ce,{className:"h-4 w-4"}),e.jsx(oe,{children:I})]})]})]}),e.jsxs(de,{defaultValue:"about",className:"mt-8",children:[e.jsx(me,{className:"grid w-full grid-cols-3",children:M.map(s=>e.jsx(he,{value:s.value,children:s.label},s.value))}),M.map(s=>e.jsxs(xe,{value:s.value,children:[s.value==="about"&&je.map((a,l)=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:a.title}),e.jsx("p",{className:"mb-4",children:a.text}),e.jsx("h4",{className:"font-medium mb-2",children:"Features:"}),e.jsx("ul",{className:"list-disc pl-5 space-y-1",children:a.features.map((o,u)=>e.jsx("li",{children:o},u))})]},l)),s.value==="tips"&&ve.map((a,l)=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:a.title}),e.jsx("ul",{className:"list-disc pl-5 space-y-3",children:a.tips.map((o,u)=>e.jsx("li",{children:o.text},u))})]},l)),s.value==="formats"&&Ne.map((a,l)=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium mb-1",children:a.format}),e.jsx("p",{className:"text-sm mb-2",children:a.description}),e.jsx("ul",{className:"text-xs text-gray-500",children:a.features.map((o,u)=>e.jsx("li",{children:o},u))})]},l))]},s.value))]})]})})}export{Se as default};
